<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/2d8fe98e97.js" crossorigin="anonymous"></script>
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous"> -->

    <link href="./profile.css" rel="stylesheet">
    <title>Profile</title>
</head>
<body>
    <div class="container">
        <header>
            <h2><a href="./index.html" class="logo">P-MerG</a></h2>
            <div class="navbar">
                <a href="./index.html" class="navbar_link">Home</a>
                <a href="./boards.html" class="navbar_link">Boards</a>
                <!-- <a href="./profile.html" class="navbar_link">Profile</a> -->
                <a href="./login.html" class="navbar_link">Logout</a>
                <a href="./student.html" class="navbar_link">Classroom</a>
            </div>
        </header>
        <div class="profile_container">
            <div class="sidebar">
                <h4>Sidebar</h4>
                <p>Chat box</p>
                <p>Settings</p>
            </div>
            <div class="profile_box">
                <form>
                    <div>
                        <label>Name:</label>
                        <input id="name" placeholder="Enter your name in full">
                    </div>
                    <div>
                        <label>Designation:</label>
                        <input id="role" placeholder="e.g Admin, Student, team-lead..">
                    </div>
                    <div>
                        <label>Bio:</label>
                        <textarea id="bio" name="freeform" rows="4" cols="50">
I have been in Jenga for..
                        </textarea>
                    </div>
                    <div>
                        <label>GitHub link:</label>
                        <input id="github" placeholder="example@github.com">
                    </div>
                    <div>
                        <label>Level:</label>
                        <input id="level" placeholder="e.g 1 for Sprint1">
                    </div>
                    <div class="btns">
                        <button type="button" id="save_prof">Save</button>
                        <button type="submit" id="editProfile">Edit Profile</button>
                        <button type="submit" id="viewProfile">View Profile</button>
                    </div>
                    <!-- <a href="#">Edit profile</a>
                    <a href="#"></a> -->

                </form>
            </div>
            <div class="certs">
                <h4>Certificates</h4>
                <div class="cert1">

                </div>
                <div class="cert2">

                </div>
                <div class="cert3">

                </div>
                <p><a href="#">see all</a></p>
            </div>
        </div>
    </div>    

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
        // import { getAuth, signInWithEmailAndPassword, getRedirectResult, GoogleAuthProvider, signInWithRedirect, FacebookAuthProvider } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js";
        import { getFirestore, collection, getDocs, addDoc, doc, deleteDoc, updateDoc } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-firestore.js";

        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCq18SQTbZg59xu8TK5RQaiW9VFzafD5b4",
            authDomain: "p-merg2-74700.firebaseapp.com",
            projectId: "p-merg2-74700",
            storageBucket: "p-merg2-74700.appspot.com",
            messagingSenderId: "897038781923",
            appId: "1:897038781923:web:f689f8b11feedd9b9464d6"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        // const auth = getAuth(app);
        const db = getFirestore(app);

        const add_prof =document.getElementById('save_prof');

            add_prof.addEventListener('click', async(e)=>{

                var name = document.getElementById('name').value;
                var role = document.getElementById('role').value;
                var bio = document.getElementById('bio').value;
                var github = document.getElementById('github').value;
                var level = document.getElementById('level'.value);


                try {
                    const docRef = await addDoc(collection(db, "Profiles"), {
                        Name: name,
                        Level: level,
                        Designation: role,
                        github: github,
                        Bio: bio
                    });

                    console.log("Document written with ID: ", docRef.id);
                    alert("entry added");
                    } catch (e) {
                    console.error("Error adding document: ", e);
                    }  
            });
            if (doc.id){
                window.location.reload()
            }
    </script>
</body>
</html>